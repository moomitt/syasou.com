<div class="container">
  <div class="row">
    <div class="col-10 mx-auto my-5">
      <h4>投稿詳細ページ</h4>
    </div>
    <div class="col-10 mx-auto my-4">
      <p>
        <span id="startStationName"></span>　駅～
        <span id="endStationName"></span>　駅間
      </p>
      路線名：　<p id="LineName"></p>

      <input type="hidden" id="startStationCord" value="<%= @post.start_station %>">
      <input type="hidden" id="endStationCord" value="<%= @post.end_station %>">
      <input type="hidden" id="LineCord" value="<%= @post.line_code %>">

      <% if @post.post_image.attached? %>
        <%= image_tag @post.post_image.variant(resize_to_fill: [400, 280]).processed %>
      <% else %>
        <%= image_tag 'no_image', size: "300x200" %>
      <% end %>
      <div class="my-3">
        <% if @user.user_image.attached? %>
          <%= image_tag @user.user_image.variant(resize_to_fill: [50, 50]).processed,
          class: "rounded-circle mr-2" %>
        <% else %>
          <%= image_tag 'user', class: "rounded-circle mr-2", size: "50x50" %>
        <% end %>
        <%= @user.name %>
      </div>

      <p><%= @post.body %></p>

      <p>おすすめ時間帯</p>
      <p><%= @post.time_zone %></p>

      <p>周辺のおすすめスポット</p>
      <p><%= @post.spot %></p>

      <div class="bookmark_buttons_<%= @post.id %>">
        <%= render partial: 'public/bookmarks/bookmark', locals: { post: @post} %>
      </div>

      <p>コメント一覧</p>
      <% if @comments.present? %>
        <p><small>（全 <%= @comments.count %> 件）</small></p>
        <% @comments.each do |comment| %>
          <div>
            <%= comment.text %>
            <%= comment.user.name %>
            <%= comment.created_at.strftime('%Y/%m/%d') %>
            <% if comment.user_id = current_user.id %>
              <%= link_to 'コメントを削除', post_comment_path(@post.id, comment.id), method: :delete,
              data: {confirm: "削除したコメントは元に戻せません。本当にこのコメントを削除しますか？"} %>
            <% end %>
          </div>
        <% end %>
      <% else %>
        <p>この投稿へのコメントはありません</p>
      <% end %>

      <% if user_signed_in? %>
        <%= form_with model: @comment, url: post_comments_path(@post.id), method: :post do |f| %>
          <%= f.label :text %>
          <%= f.text_area :text %>
          <%= f.submit 'コメントを投稿' %>
        <% end %>
      <% end %>

      <% if @post.user_id == current_user.id %>
        <%= link_to '投稿を編集', edit_post_path(@post.id) %>
      <% end %>

      <div id="map" class="my-4" style="height:500px; width:500px;"></div>
    </div>
  </div>
</div>

<%= javascript_pack_tag 'show' %>
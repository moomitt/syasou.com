<div class="container-fluid public">
  <div class="row mx-auto" style="max-width:800px">
    <div class="map-container col-sm-10 col-12 mx-auto mt-5">

      <div class="row pt-0 mt-0 my-3">
        <div class="col-11 my-4 mx-auto d-flex align-items-center">
          <div class="d-inline-block">
            <% if @user.user_image.attached? %>
              <%= image_tag @user.user_image.variant(resize_to_fill: [80, 80]).processed,
              class: "rounded-circle mx-2" %>
            <% else %>
              <%= image_tag 'user', class: "rounded-circle mx-2", size: "80x80" %>
            <% end %>
          </div>
          <div class="d-inline-block my-3 ml-3">
            <h5 class="my-2"><%= @user.name %></h5>

            <div class="follow_buttons_<%= @user.id %>">
              <%= render partial: 'public/follows/follow', locals: { user: @user } %>
            </div>

          </div>
        </div>

        <h5 class="col-12 text-center">
          投稿一覧
        </h5>

        <div class="col-lg-10 col-md-8 col-sm-8 col-10 mx-auto my-4 px-0">
          <% if @all_posts.present? %>
            <% @all_posts.each do |post| %>
              <div class="post-list mb-4">
                <%= link_to post_path(post.id), class: "row" do %>
                  <div class="post-text col-lg-6 col-12 mx-auto">
                    <p class="section">
                      <%= post.start_station_name %>駅
                      －
                      <%= post.end_station_name %>駅
                    </p>
                    <p class="body">
                      <%= safe_join(post.body.split("\r"),tag(:br)) %>
                    </p>
                    <p class="caption">
                      <% start_station_prefecture = Prefecture.find(post.start_station_prefecture) %>
                      <span><%= start_station_prefecture.name %></span>
                      <% if post.start_station_prefecture != post.end_station_prefecture %>
                        <% end_station_prefecture = Prefecture.find(post.end_station_prefecture) %>
                        <span><%= end_station_prefecture.name %></span>
                      <% end %>
                      <%= post.line_name %>
                    </p>
                  </div>
                  <div class="post-image col-lg-6 col-12 mx-auto px-0">
                    <% if post.post_images.attached? %>
                      <% if post.post_images.length == 1 %>
                        <%= image_tag post.post_images[0].variant(resize_to_fill: [240, 160]).processed %>
                      <% elsif post.post_images.length == 2 %>
                        <%= image_tag post.post_images[0].variant(resize_to_fill: [120, 160]).processed %>
                        <%= image_tag post.post_images[1].variant(resize_to_fill: [120, 160]).processed %>
                      <% elsif post.post_images.length == 3 %>
                        <%= image_tag post.post_images[0].variant(resize_to_fill: [240, 80]).processed %>
                        <%= image_tag post.post_images[1].variant(resize_to_fill: [119, 80]).processed %>
                        <%= image_tag post.post_images[2].variant(resize_to_fill: [119, 80]).processed %>
                      <% else %>
                        <%= image_tag post.post_images[0].variant(resize_to_fill: [119, 80]).processed %>
                        <%= image_tag post.post_images[1].variant(resize_to_fill: [119, 80]).processed %>
                        <%= image_tag post.post_images[2].variant(resize_to_fill: [119, 80]).processed %>
                        <%= image_tag post.post_images[3].variant(resize_to_fill: [119, 80]).processed %>
                      <% end %>
                    <% else %>
                      <%= image_tag 'no_image', size: "240x160" %>
                    <% end %>
                  </div>
                <% end %>
                <div class="row bookmark-button">
                  <div class="bookmark_buttons_<%= post.id %> text-right col-12 px-0s">
                    <%= render partial: 'public/bookmarks/bookmark', locals: { post: post} %>
                  </div>
                </div>
              </div>
            <% end %>
          <% else %>
            <p class="text-center">投稿がありません</p>
          <% end %>
        </div>
      </div>

    </div>
  </div>
</div>